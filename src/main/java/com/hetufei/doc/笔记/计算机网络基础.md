### https中ssl的握手过程、为什么不一直用非对称加密?
前面说到，HTTPS其实就是将HTTP的数据包再通过SSL/TLS加密后传输，那么SSL/TLS又是什么呢？

SSL（Secure Sockets Layer）安全套接层和TLS（Transport Layer Security）传输层安全协议其实是一套东西。
工作流程：
1、用户在浏览器发起HTTPS请求（如 https://www.mogu.com/），默认使用服务端的443端口进行连接；
2、HTTPS需要使用一套CA数字证书，证书内会附带一个公钥Pub，而与之对应的私钥Private保留在服务端不公开；
3、服务端收到请求，返回配置好的包含公钥Pub的证书给客户端；
4、客户端收到证书，校验合法性，主要包括是否在有效期内、证书的域名与请求的域名是否匹配，上一级证书是否有效（递归判断，直到判断到系统内置或浏览器配置好的根证书），如果不通过，则显示HTTPS警告信息，如果通过则继续；
5、客户端生成一个用于对称加密的随机Key，并用证书内的公钥Pub进行加密，发送给服务端；
6、服务端收到随机Key的密文，使用与公钥Pub配对的私钥Private进行解密，得到客户端真正想发送的随机Key；
7、服务端使用客户端发送过来的随机Key对要传输的HTTP数据进行对称加密，将密文返回客户端；
8、客户端使用随机Key对称解密密文，得到HTTP数据明文；
9、后续HTTPS请求使用之前交换好的随机Key进行对称加解密。

为了兼顾性能和安全性，使用了非对称加密+对称加密的方案。

为了保证公钥传输中不被篡改，又使用了非对称加密的数字签名功能，借助CA机构和系统根证书的机制保证了HTTPS证书的公信力。
### tcp/ip协议

##### 1.什么是零拷贝zero-copy
主要就是利用各种零拷贝技术，避免让CPU做大量的数据拷贝任务，减少不必要的拷贝，或者让别的组件来做这一类简单的数据传输任务，让CPU解脱出来专注于别的任务。这样就可以让系统资源的利用更加有效。
减少数据在内核空间和用户空间来回拷贝
https://mp.weixin.qq.com/s/FgBCop2zFfcX5ZszE0NoCQ
##### 2.三次握手四次挥手，为什么是三次握手而不是两次或者四次

三次可以避免资源浪费，防止历史连接的初始化

四次挥手才能够保证客户端和服务端都已经确认断开了连接

##### 3.linux常用命令
查看tcp连接数 netstat -nat|grep -i "80"|wc -l
查看linux后十行日志

> tail -n 50 info.log
查詢日誌某關鍵字前後十行
> grep -C 10 'keyword' info.log

查询日志某关键字上面十行
> grep -B 10 'keyword' info.log

查询日志某关键字下面十行
> grep -A 10 'keyword' info.log
##### 4. TCP、UDP、Http区别。TCP重传、滑动窗口、流量控制，拥塞控制

TCP格式？
答：序列号，确认应答号，控制标志位

UDP 和 TCP 有什么区别呢？分别的应用场景是？
UDP 不提供复杂的控制机制，利用 IP 提供面向「无连接」的通信服务。
- TCP 是面向连接的传输层协议，传输数据前先要建立连接。UDP 是不需要连接，即刻传输数据。
- TCP 是一对一的两点服务，即一条连接只有两个端点。UDP 支持一对一、一对多、多对多的交互通信
- TCP 是可靠交付数据的，数据可以无差错、不丢失、不重复、按需到达。UDP 是尽最大努力交付，不保证可靠交付数据。
- TCP 有拥塞控制和流量控制机制，保证数据传输的安全性。UDP 则没有，即使网络非常拥堵了，也不会影响 UDP 的发送速率。
TCP 首部长度较长，会有一定的开销，首部在没有使用「选项」字段时是 20 个字节，如果使用了「选项」字段则会变长的。UDP 首部只有 8 个字节，并且是固定不变的，开销较小。

应用场景区别？
- 由于 TCP 是面向连接，能保证数据的可靠性交付，因此经常用于：FTP 文件传输、HTTP / HTTPS
- 由于 UDP 面向无连接，它可以随时发送数据，再加上UDP本身的处理既简单又高效，因此经常用于：包总量较少的通信，如 DNS 、SNMP 等、视频、音频等多媒体通信。广播通信

tcp如何保证可靠性？
答：TCP 是通过序列号、确认应答、重发控制、连接管理以及窗口控制等机制实现可靠性传输的。
TCP的重传机制？
答：TCP 实现可靠传输的方式之一，是通过序列号与确认应答。（重传机制）
接下来说说常见的重传机制：超时重传、快速重传、SACK、D-SACK
超时重传，党客户端发送报文给服务器，当在一定时间内没有收到ACK报文时，就会进行重发
TCP 还有另外一种快速重传（Fast Retransmit）机制，它不以时间为驱动，而是以数据驱动重传。

TCP滑动窗口？
答：每发送一个数据，就等服务器回ack的方式效率过低，所以引入了滑动窗口机制。TCP 引入了窗口这个概念。即使在往返时间较长的情况下，它也不会降低网络通信的效率。那么有了窗口，就可以指定窗口大小，窗口大小就是指无需等待确认应答，而可以继续发送数据的最大值。窗口的实现实际上是操作系统开辟的一个缓存空间，发送方主机在等到确认应答返回之前，必须在缓冲区中保留已发送的数据。如果按期收到确认应答，此时数据就可以从缓存区清除。
通常窗口的大小是由接收方的决定的。发送方发送的数据大小不能超过接收方的窗口大小，否则接收方就无法正常接收到数据

TCP流量控制？
TCP 提供一种机制可以让「发送方」根据「接收方」的实际接收能力控制发送的数据量，这就是所谓的流量控制

TCP拥塞控制？
答：在网络出现拥堵时，如果继续发送大量数据包，可能会导致数据包时延、丢失等，这时 TCP 就会重传数据，但是一重传就会导致网络的负担更重，于是会导致更大的延迟以及更多的丢包，这个情况就会进入恶性循环被不断地放大….
拥塞窗口 cwnd是发送方维护的一个 的状态变量，它会根据网络的拥塞程度动态变化的。

为什么是三次握手？不是两次、四次？
- 三次握手才可以阻止历史重复连接的初始化（主要原因）
- 三次握手才可以同步双方的初始序列号
- 三次握手才可以避免资源浪费

为什么是四次挥手？
关闭连接时，客户端向服务端发送 FIN 时，仅仅表示客户端不再发送数据了但是还能接收数据。
服务器收到客户端的 FIN 报文时，先回一个 ACK 应答报文，而服务端可能还有数据需要处理和发送，等服务端不再发送数据时，才发送 FIN 报文给客户端来表示同意现在关闭连接。
